(this["webpackJsonppaketo-dashboard"]=this["webpackJsonppaketo-dashboard"]||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t){},,,,,,function(e,t){},,,function(e,t,a){e.exports=a(50)},,,,,function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(0),s=a.n(r),n=a(24),o=a.n(n);a(31),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=a(13),i=a(1),u=a(2),l=a(12),p=a(4),h=a(5),m=a(7),d=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t="";return t="/paketo-dashboard",s.a.createElement(m.b,{path:this.props.path,render:function(a){var r=a.location;return e.props.authenticated?e.props.children:s.a.createElement(m.a,{to:{pathname:"".concat(t,"/login"),state:{from:r}}})}})}}]),a}(s.a.Component),f=(a(37),a(38),function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e="";return e="/paketo-dashboard",s.a.createElement("header",null,s.a.createElement("h1",null,s.a.createElement(c.b,{to:e},s.a.createElement("img",{src:"".concat(e,"/logo512.png"),className:"logo",alt:"logo"}),"Paketo Buildpacks")),s.a.createElement("div",{className:"navigation"},s.a.createElement("h3",null,s.a.createElement(c.b,{to:"".concat(e,"/issues")},"Issues")),s.a.createElement("h3",null,s.a.createElement(c.b,{to:"".concat(e,"/pull-requests")},"Pull Requests"))))}}]),a}(s.a.Component)),v=(a(39),function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var r;Object(i.a)(this,a);var s="/";s="/paketo-dashboard";var n=((r=t.call(this,e)).props.location.state||{from:{pathname:s}}).from;return r.state={token:"",from:n},r.handleChange=r.handleChange.bind(Object(l.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(l.a)(r)),r}return Object(u.a)(a,[{key:"handleChange",value:function(e){var t=e.currentTarget;this.setState({token:t.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.assignToken(this.state.token),this.props.history.replace(this.state.from)}},{key:"render",value:function(){return s.a.createElement("form",{className:"login",onSubmit:this.handleSubmit},s.a.createElement("label",{htmlFor:"token"},"GitHub Personal Access Token"),s.a.createElement("input",{type:"text",id:"token",value:this.state.token,onChange:this.handleChange}),s.a.createElement("input",{type:"submit",value:"Submit"}))}}]),a}(s.a.Component)),b=a(3),y=a.n(b),k=a(8),O=a(6),j=function e(t){Object(i.a)(this,e),this.id=t.id,this.name=t.name,this.url=t.url,this.openIssuesCount=t.openIssuesCount},g=a(15),E=function e(t){Object(i.a)(this,e),this.avatarURL=t.avatarURL},S=function e(t){Object(i.a)(this,e),this.id=t.id,this.number=t.number,this.title=t.title,this.url=t.url,this.createdAt=g.DateTime.fromISO(t.createdAt),this.commentCount=t.commentCount,this.user=t.user},w=(a(17),function(){function e(t){Object(i.a)(this,e),this.storage=t.storage}return Object(u.a)(e,[{key:"do",value:function(){var e=Object(O.a)(y.a.mark((function e(t){var a,r,s,n,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.storage.getItem("token")||"",(r=t.path).startsWith("/")&&(r="https://api.github.com".concat(r)),e.next=5,fetch(r,{method:t.method,headers:{Authorization:"Bearer ".concat(a)}});case 5:return s=e.sent,n=s.headers.get("Link"),e.next=9,s.json();case 9:return o=e.sent,e.abrupt("return",{status:s.status,data:o,headers:{link:n}});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),N=function(){function e(t){Object(i.a)(this,e),this.client=t.client}return Object(u.a)(e,[{key:"list",value:function(){var e=Object(O.a)(y.a.mark((function e(t){var a,r,s,n,o,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="/repos/".concat(t,"/issues"),r=[];case 2:if(!a){e.next=11;break}return e.next=5,this.client.do({method:"GET",path:a});case 5:s=e.sent,n=Object(k.a)(s.data);try{for(n.s();!(o=n.n()).done;)(c=o.value).pull_request||r.push(new S({id:c.id,number:c.number,title:c.title,url:c.html_url,createdAt:c.created_at,commentCount:c.comments,user:new E({avatarURL:c.user.avatar_url})}))}catch(i){n.e(i)}finally{n.f()}a=((s.headers.link||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1],e.next=2;break;case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),q=function e(t){Object(i.a)(this,e),this.id=t.id,this.number=t.number,this.title=t.title,this.createdAt=g.DateTime.fromISO(t.createdAt),this.url=t.url,this.user=t.user},R=function(){function e(t){Object(i.a)(this,e),this.client=t.client}return Object(u.a)(e,[{key:"list",value:function(){var e=Object(O.a)(y.a.mark((function e(t){var a,r,s,n,o,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="/repos/".concat(t,"/pulls"),r=[];case 2:if(!a){e.next=11;break}return e.next=5,this.client.do({method:"GET",path:a});case 5:s=e.sent,n=Object(k.a)(s.data);try{for(n.s();!(o=n.n()).done;)c=o.value,r.push(new q({id:c.id,number:c.number,title:c.title,createdAt:c.created_at,url:c.html_url,user:new E({avatarURL:c.user.avatar_url})}))}catch(i){n.e(i)}finally{n.f()}a=((s.headers.link||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1],e.next=2;break;case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),x=function e(t){Object(i.a)(this,e),this.tag=t.tag,this.commitsBehind=t.commitsBehind},C=new x({tag:"\u2014",commitsBehind:0}),_=function(){function e(t){Object(i.a)(this,e),this.client=t.client}return Object(u.a)(e,[{key:"latest",value:function(){var e=Object(O.a)(y.a.mark((function e(t){var a,r,s,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.do({method:"GET",path:"/repos/".concat(t,"/releases/latest")});case 2:if(a=e.sent,r=C,200!==a.status){e.next=11;break}return s=a.data.tag_name,e.next=8,this.client.do({method:"GET",path:"/repos/".concat(t,"/compare/main...").concat(s)});case 8:a=e.sent,n=a.data.behind_by,r=new x({tag:s,commitsBehind:n});case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),A=function(){function e(t){Object(i.a)(this,e),this.props=t}return Object(u.a)(e,[{key:"set",value:function(e,t){e=this._key(e),this.props.storage.setItem(e,JSON.stringify(t))}},{key:"get",value:function(e){e=this._key(e);var t=this.props.storage.getItem(e);return t?JSON.parse(t):{}}},{key:"_key",value:function(e){return e=e.replace(/^(\/)/,""),"/cache/".concat(e)}}]),e}(),I=a(11),T=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return s.a.createElement("a",{className:this.props.className,"aria-label":this.props["aria-label"],href:this.props.href,target:"_blank",rel:"noopener noreferrer"},this.props.children)}}]),a}(s.a.Component),U=(a(41),function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var r;Object(i.a)(this,a),(r=t.call(this,e)).cacheKey="/repos/".concat(e.repo.name,"/issues");var s=[],n=r.props.cache.get(r.cacheKey);if(n.issues)for(var o=0;o<n.issues.length;o++)s.push(new S(n.issues[o]));return r.state={issues:s},r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.load()}},{key:"componentDidUpdate",value:function(e){this.props.repo.openIssuesCount!==e.repo.openIssuesCount&&this.load()}},{key:"load",value:function(){var e=Object(O.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.store.list(this.props.repo.name);case 2:t=e.sent,this.props.cache.set(this.cacheKey,{issues:t}),this.setState({issues:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e="none",t=this.state.issues.length;return t>0&&(e="low"),t>3&&(e="medium"),t>6&&(e="high"),s.a.createElement(T,{className:"issue-count ".concat(e),href:"".concat(this.props.repo.url,"/issues"),"aria-label":"issue-count"},s.a.createElement(I.d,{size:16}),s.a.createElement("div",{className:"count"},t))}}]),a}(s.a.Component)),M=(a(42),function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var r;Object(i.a)(this,a),(r=t.call(this,e)).cacheKey="/repos/".concat(e.repo.name,"/pull_requests");var s=[],n=r.props.cache.get(r.cacheKey);if(n.pull_requests)for(var o=0;o<n.pull_requests.length;o++)s.push(new q(n.pull_requests[o]));return r.state={pullRequests:s},r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.load()}},{key:"componentDidUpdate",value:function(e){this.props.repo.openIssuesCount!==e.repo.openIssuesCount&&this.load()}},{key:"load",value:function(){var e=Object(O.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.store.list(this.props.repo.name);case 2:t=e.sent,this.props.cache.set(this.cacheKey,{pull_requests:t}),this.setState({pullRequests:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e="none",t=this.state.pullRequests.length;return t>0&&(e="low"),t>3&&(e="medium"),t>6&&(e="high"),s.a.createElement(T,{href:"".concat(this.props.repo.url,"/pulls"),className:"pull-request-count ".concat(e),"aria-label":"pull-request-count"},s.a.createElement(I.c,{size:16}),s.a.createElement("div",{className:"count"},t))}}]),a}(s.a.Component)),K=(a(43),function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var r;Object(i.a)(this,a),(r=t.call(this,e)).cacheKey="/repos/".concat(r.props.repo.name,"/releases/latest");var s=C,n=r.props.cache.get(r.cacheKey);return n.release&&(s=new x(n.release)),r.state={release:s},r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.load()}},{key:"load",value:function(){var e=Object(O.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.releaseStore.latest(this.props.repo.name);case 2:t=e.sent,this.props.cache.set(this.cacheKey,{release:t}),this.setState({release:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e="commits-behind";return this.state.release.commitsBehind>0&&(e+=" behind"),s.a.createElement(T,{className:"release-state",href:"".concat(this.props.repo.url,"/releases"),"aria-label":"release-state"},s.a.createElement("div",{className:"tag","aria-label":"tag"},this.state.release.tag),s.a.createElement("div",{className:e,"aria-label":"commits-behind"},this.state.release.commitsBehind,s.a.createElement(I.b,{size:16})))}}]),a}(s.a.Component)),D=(a(44),function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.repo.name.split("/"),t=e[0],a=e[1];return s.a.createElement("div",{className:"repo-item"},s.a.createElement("div",{className:"org"},t),s.a.createElement(T,{href:this.props.repo.url,className:"repo"},a),s.a.createElement("div",{className:"issue-pull-request-count"},s.a.createElement(U,{repo:this.props.repo,store:this.props.issueStore,cache:this.props.cache}),s.a.createElement(M,{repo:this.props.repo,store:this.props.pullRequestStore,cache:this.props.cache})),s.a.createElement(K,{repo:this.props.repo,releaseStore:this.props.releaseStore,cache:this.props.cache}))}}]),a}(s.a.Component)),B=function(){function e(t){Object(i.a)(this,e),this.props=t}return Object(u.a)(e,[{key:"list",value:function(){var e=Object(O.a)(y.a.mark((function e(t){var a,r,s,n,o,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],r="/orgs/".concat(t,"/repos");case 2:if(!r){e.next=11;break}return e.next=5,this.props.client.do({method:"GET",path:r});case 5:s=e.sent,n=Object(k.a)(s.data);try{for(n.s();!(o=n.n()).done;)c=o.value,a.push(new j({id:c.id,name:c.full_name,url:c.html_url,openIssuesCount:c.open_issues_count}))}catch(i){n.e(i)}finally{n.f()}r=((s.headers.link||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1],e.next=2;break;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),L=(a(23),a(45),function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var r;Object(i.a)(this,a),(r=t.call(this,e)).cacheKey="/repos";var s=[],n=r.props.cache.get(r.cacheKey);if(n.repos)for(var o=0;o<n.repos.length;o++)s.push(new j(n.repos[o]));return r.state={loading:0===s.length,repos:s},r.handleReload=r.handleReload.bind(Object(l.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.load(),this.interval=this.props.timer.setInterval(this.load.bind(this),9e5)}},{key:"componentWillUnmount",value:function(){this.props.timer.clearInterval(this.interval)}},{key:"handleReload",value:function(e){this.load()}},{key:"load",value:function(){var e=Object(O.a)(y.a.mark((function e(){var t,a,r,s,n,o,c,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.props.repoStore.list("paketo-buildpacks"),this.props.repoStore.list("paketo-community")]);case 2:t=e.sent,a=[],r=Object(k.a)(t);try{for(r.s();!(s=r.n()).done;){n=s.value,o=Object(k.a)(n);try{for(o.s();!(c=o.n()).done;)i=c.value,a.push(i)}catch(u){o.e(u)}finally{o.f()}}}catch(u){r.e(u)}finally{r.f()}a.sort((function(e,t){var a=e.name.toUpperCase(),r=t.name.toUpperCase();return a<r?-1:a>r?1:0})),this.props.cache.set(this.cacheKey,{repos:a}),this.setState({loading:!1,repos:a});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=s.a.createElement("div",{className:"loading"},"...");return this.state.loading||(t=this.state.repos.map((function(t){return s.a.createElement(D,{key:t.id,repo:t,issueStore:e.props.issueStore,pullRequestStore:e.props.pullRequestStore,releaseStore:e.props.releaseStore,cache:e.props.cache})}))),s.a.createElement("div",{className:"repo-list"},s.a.createElement("div",{className:"title"},s.a.createElement("h2",null,"Overview"),s.a.createElement("button",{onClick:this.handleReload},s.a.createElement(I.e,{size:16}))),s.a.createElement("div",{className:"list"},t))}}]),a}(s.a.Component)),P=(a(46),function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.issue.createdAt.toRelative(),t=this.props.issue.createdAt.toLocaleString({month:"short",day:"numeric",year:"numeric"}),a="comment-count";return 0===this.props.issue.commentCount&&(a+=" none"),s.a.createElement("div",{className:"issue-item"},s.a.createElement(T,{className:"repo",href:this.props.repo.url},this.props.repo.name),s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"identifier"},s.a.createElement("img",{className:"avatar",src:this.props.issue.user.avatarURL,alt:"user-avatar"}),s.a.createElement("div",{className:"number"},"#",this.props.issue.number),s.a.createElement(T,{className:"title",href:this.props.issue.url},this.props.issue.title)),s.a.createElement("div",{className:a,"aria-label":"comment-count"},s.a.createElement("div",{className:"count"},this.props.issue.commentCount),s.a.createElement(I.a,{size:16}))),s.a.createElement("div",{className:"created-at"},"opened ",e," (",t,")"))}}]),a}(s.a.Component)),z=(a(47),function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var r;Object(i.a)(this,a);var s=[],n=(r=t.call(this,e)).props.cache.get("/repos");if(n.repos){var o,c=Object(k.a)(n.repos);try{for(c.s();!(o=c.n()).done;){var u=o.value,l=r.props.cache.get("/repos/".concat(u.name,"/issues"));if(l.issues){var p,h=Object(k.a)(l.issues);try{for(h.s();!(p=h.n()).done;){var m=p.value;s.push({repo:u,issue:new S(m)})}}catch(d){h.e(d)}finally{h.f()}}}}catch(d){c.e(d)}finally{c.f()}}return s.sort((function(e,t){var a=e.issue.createdAt.toMillis(),r=t.issue.createdAt.toMillis();return a<r?-1:a>r?1:0})),r.state={loading:0===s.length,issues:s},r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.load()}},{key:"load",value:function(){var e=Object(O.a)(y.a.mark((function e(){var t,a,r,s,n,o,c,i,u,l,p,h,m,d,f,v,b,O;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.props.repoStore.list("paketo-buildpacks"),this.props.repoStore.list("paketo-community")]);case 2:t=e.sent,a=[],r=[],s=Object(k.a)(t);try{for(s.s();!(n=s.n()).done;){o=n.value,c=Object(k.a)(o);try{for(c.s();!(i=c.n()).done;)u=i.value,a.push(u),l=this.props.issueStore.list(u.name),r.push(l)}catch(y){c.e(y)}finally{c.f()}}}catch(y){s.e(y)}finally{s.f()}return e.next=9,Promise.all(r);case 9:for(p=e.sent,h=[],m=0;m<p.length;m++){d=p[m],f=a[m],this.props.cache.set("/repos/".concat(f.name,"/issues"),{issues:d}),v=Object(k.a)(d);try{for(v.s();!(b=v.n()).done;)O=b.value,h.push({repo:f,issue:O})}catch(y){v.e(y)}finally{v.f()}}a.sort((function(e,t){var a=e.name.toUpperCase(),r=t.name.toUpperCase();return a<r?-1:a>r?1:0})),this.props.cache.set("/repos",{repos:a}),h.sort((function(e,t){var a=e.issue.createdAt.toMillis(),r=t.issue.createdAt.toMillis();return a<r?-1:a>r?1:0})),this.setState({loading:!1,issues:h});case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=s.a.createElement("div",{className:"loading"},"...");return this.state.loading||(e=this.state.issues.map((function(e){return s.a.createElement(P,{key:e.issue.id,issue:e.issue,repo:e.repo})}))),s.a.createElement("div",{className:"issue-list"},s.a.createElement("div",{className:"title"},s.a.createElement("h2",null,"Open Issues"),s.a.createElement("div",{className:"count"},"(",this.state.issues.length,")")),s.a.createElement("div",{className:"list"},e))}}]),a}(s.a.Component)),G=(a(48),function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.pullRequest.createdAt.toRelative(),t=this.props.pullRequest.createdAt.toLocaleString({month:"short",day:"numeric",year:"numeric"});return s.a.createElement("div",{className:"pull-request-item"},s.a.createElement(T,{className:"repo",href:this.props.repo.url},this.props.repo.name),s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"identifier"},s.a.createElement("img",{className:"avatar",src:this.props.pullRequest.user.avatarURL,alt:"user-avatar"}),s.a.createElement("div",{className:"number"},"#",this.props.pullRequest.number),s.a.createElement(T,{className:"title",href:this.props.pullRequest.url},this.props.pullRequest.title))),s.a.createElement("div",{className:"created-at"},"opened ",e," (",t,")"))}}]),a}(s.a.Component)),J=(a(49),function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var r;Object(i.a)(this,a);var s=[],n=(r=t.call(this,e)).props.cache.get("/repos");if(n.repos){var o,c=Object(k.a)(n.repos);try{for(c.s();!(o=c.n()).done;){var u=o.value,l=r.props.cache.get("/repos/".concat(u.name,"/pull_requests"));if(l.pull_requests){var p,h=Object(k.a)(l.pull_requests);try{for(h.s();!(p=h.n()).done;){var m=p.value;s.push({repo:u,pullRequest:new q(m)})}}catch(d){h.e(d)}finally{h.f()}}}}catch(d){c.e(d)}finally{c.f()}}return s.sort((function(e,t){var a=e.pullRequest.createdAt.toMillis(),r=t.pullRequest.createdAt.toMillis();return a<r?-1:a>r?1:0})),r.state={loading:0===s.length,pullRequests:s},r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.load()}},{key:"load",value:function(){var e=Object(O.a)(y.a.mark((function e(){var t,a,r,s,n,o,c,i,u,l,p,h,m,d,f,v,b,O;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.props.repoStore.list("paketo-buildpacks"),this.props.repoStore.list("paketo-community")]);case 2:t=e.sent,a=[],r=[],s=Object(k.a)(t);try{for(s.s();!(n=s.n()).done;){o=n.value,c=Object(k.a)(o);try{for(c.s();!(i=c.n()).done;)u=i.value,a.push(u),l=this.props.pullRequestStore.list(u.name),r.push(l)}catch(y){c.e(y)}finally{c.f()}}}catch(y){s.e(y)}finally{s.f()}return e.next=9,Promise.all(r);case 9:for(p=e.sent,h=[],m=0;m<p.length;m++){d=p[m],f=a[m],this.props.cache.set("/repos/".concat(f.name,"/pull_requests"),{pull_requests:d}),v=Object(k.a)(d);try{for(v.s();!(b=v.n()).done;)O=b.value,h.push({repo:f,pullRequest:O})}catch(y){v.e(y)}finally{v.f()}}a.sort((function(e,t){var a=e.name.toUpperCase(),r=t.name.toUpperCase();return a<r?-1:a>r?1:0})),this.props.cache.set("/repos",{repos:a}),h.sort((function(e,t){var a=e.pullRequest.createdAt.toMillis(),r=t.pullRequest.createdAt.toMillis();return a<r?-1:a>r?1:0})),this.setState({loading:!1,pullRequests:h});case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=s.a.createElement("div",{className:"loading"},"...");return this.state.loading||(e=this.state.pullRequests.map((function(e){return s.a.createElement(G,{key:e.pullRequest.id,pullRequest:e.pullRequest,repo:e.repo})}))),s.a.createElement("div",{className:"pull-request-list"},s.a.createElement("div",{className:"title"},s.a.createElement("h2",null," Open Pull Requests"),s.a.createElement("div",{className:"count"},"(",this.state.pullRequests.length,")")),s.a.createElement("div",{className:"list"},e))}}]),a}(s.a.Component)),W=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={authenticated:!!r.props.storage.getItem("token")},r.assignToken=r.assignToken.bind(Object(l.a)(r)),r}return Object(u.a)(a,[{key:"assignToken",value:function(e){this.props.storage.setItem("token",e),this.setState({authenticated:!!this.props.storage.getItem("token")})}},{key:"render",value:function(){var e=this,t="";return t="/paketo-dashboard",s.a.createElement("div",{className:"app"},s.a.createElement(f,null),s.a.createElement("section",{className:"body"},s.a.createElement(m.d,null,s.a.createElement(m.b,{path:"".concat(t,"/login"),render:function(t){var a=t.history,r=t.location;return s.a.createElement(v,{assignToken:e.assignToken,history:a,location:r})}}),s.a.createElement(d,{path:"".concat(t,"/issues"),authenticated:this.state.authenticated},s.a.createElement(z,{cache:this.props.cache,repoStore:this.props.repoStore,issueStore:this.props.issueStore})),s.a.createElement(d,{path:"".concat(t,"/pull-requests"),authenticated:this.state.authenticated},s.a.createElement(J,{cache:this.props.cache,repoStore:this.props.repoStore,pullRequestStore:this.props.pullRequestStore})),s.a.createElement(d,{path:"".concat(t,"/"),authenticated:this.state.authenticated},s.a.createElement(L,{repoStore:this.props.repoStore,issueStore:this.props.issueStore,pullRequestStore:this.props.pullRequestStore,releaseStore:this.props.releaseStore,timer:this.props.timer,cache:this.props.cache})))))}}]),a}(s.a.Component),F=window.localStorage,H=window,$=new A({storage:F}),Q=new w({storage:F}),V=new B({client:Q}),X=new N({client:Q}),Y=new R({client:Q}),Z=new _({client:Q});o.a.render(s.a.createElement(c.a,null,s.a.createElement(W,{repoStore:V,issueStore:X,pullRequestStore:Y,releaseStore:Z,timer:H,cache:$,storage:F})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[26,1,2]]]);
//# sourceMappingURL=main.79636b6f.chunk.js.map