(this["webpackJsonppaketo-dashboard"]=this["webpackJsonppaketo-dashboard"]||[]).push([[0],{19:function(e,t){},24:function(e,t){},32:function(e,t,s){},38:function(e,t,s){},39:function(e,t,s){},40:function(e,t,s){},42:function(e,t,s){},43:function(e,t,s){},44:function(e,t,s){},45:function(e,t,s){},46:function(e,t,s){},47:function(e,t,s){},48:function(e,t,s){},49:function(e,t,s){},50:function(e,t,s){},51:function(e,t,s){},52:function(e,t,s){"use strict";s.r(t);var a=s(1),r=s(0),n=s.n(r),c=s(25),i=s.n(c);s(32),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=s(14),u=s(2),l=s(3),h=s(13),p=s(6),d=s(5),b=s(9),j=function(e){Object(p.a)(s,e);var t=Object(d.a)(s);function s(){return Object(u.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(a.jsx)(b.b,{path:this.props.path,render:function(t){var s=t.location;return e.props.authenticated?e.props.children:Object(a.jsx)(b.a,{to:{pathname:"".concat("","/login"),state:{from:s}}})}})}}]),s}(n.a.Component),f=(s(38),s(39),function(e){Object(p.a)(s,e);var t=Object(d.a)(s);function s(){return Object(u.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("header",{children:[Object(a.jsx)("h1",{children:Object(a.jsxs)(o.b,{to:"",children:[Object(a.jsx)("img",{src:"".concat("","/logo512.png"),className:"logo",alt:"logo"}),"Paketo Buildpacks"]})}),Object(a.jsxs)("div",{className:"navigation",children:[Object(a.jsx)("h3",{children:Object(a.jsx)(o.b,{to:"".concat("","/issues"),children:"Issues"})}),Object(a.jsx)("h3",{children:Object(a.jsx)(o.b,{to:"".concat("","/pull-requests"),children:"Pull Requests"})})]})]})}}]),s}(n.a.Component)),m=(s(40),function(e){Object(p.a)(s,e);var t=Object(d.a)(s);function s(e){var a;Object(u.a)(this,s);var r=((a=t.call(this,e)).props.location.state||{from:{pathname:"/"}}).from;return a.state={token:"",from:r},a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a}return Object(l.a)(s,[{key:"handleChange",value:function(e){var t=e.currentTarget;this.setState({token:t.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.assignToken(this.state.token),this.props.history.replace(this.state.from)}},{key:"render",value:function(){return Object(a.jsxs)("form",{className:"login",onSubmit:this.handleSubmit,children:[Object(a.jsx)("label",{htmlFor:"token",children:"GitHub Personal Access Token"}),Object(a.jsx)("input",{type:"text",id:"token",value:this.state.token,onChange:this.handleChange}),Object(a.jsx)("input",{type:"submit",value:"Submit"})]})}}]),s}(n.a.Component)),v=s(4),O=s.n(v),x=s(7),y=s(8),g=function e(t){Object(u.a)(this,e),this.id=t.id,this.name=t.name,this.url=t.url,this.openIssuesCount=t.openIssuesCount},k=s(16),w=function e(t){Object(u.a)(this,e),this.avatarURL=t.avatarURL},S=function e(t){Object(u.a)(this,e),this.id=t.id,this.name=t.name,this.color=t.color},N=function e(t){Object(u.a)(this,e),this.id=t.id,this.number=t.number,this.title=t.title,this.url=t.url,this.createdAt=k.DateTime.fromISO(t.createdAt),this.commentCount=t.commentCount,this.user=t.user,this.labels=t.labels||[]},q=(s(19),function(){function e(t){Object(u.a)(this,e),this.storage=t.storage}return Object(l.a)(e,[{key:"do",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var s,a,r,n,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=this.storage.getItem("token")||"",(a=t.path).startsWith("/")&&(a="https://api.github.com".concat(a)),e.next=5,fetch(a,{method:t.method,headers:{Authorization:"Bearer ".concat(s)}});case 5:return r=e.sent,n=r.headers.get("Link"),e.next=9,r.json();case 9:return c=e.sent,e.abrupt("return",{status:r.status,data:c,headers:{link:n}});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),R=function(){function e(t){Object(u.a)(this,e),this.client=t.client}return Object(l.a)(e,[{key:"list",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var s,a,r,n,c,i,o,u,l,h;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s="/repos/".concat(t,"/issues"),a=[];case 2:if(!s){e.next=11;break}return e.next=5,this.client.do({method:"GET",path:s});case 5:r=e.sent,n=Object(x.a)(r.data);try{for(n.s();!(c=n.n()).done;)if(!(i=c.value).pull_request){o=[],u=Object(x.a)(i.labels);try{for(u.s();!(l=u.n()).done;)h=l.value,o.push(new S({id:h.id,name:h.name,color:h.color}))}catch(p){u.e(p)}finally{u.f()}a.push(new N({id:i.id,number:i.number,title:i.title,url:i.html_url,createdAt:i.created_at,commentCount:i.comments,user:new w({avatarURL:i.user.avatar_url}),labels:o}))}}catch(p){n.e(p)}finally{n.f()}s=((r.headers.link||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1],e.next=2;break;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),C=function e(t){Object(u.a)(this,e),this.id=t.id,this.number=t.number,this.title=t.title,this.createdAt=k.DateTime.fromISO(t.createdAt),this.url=t.url,this.user=t.user,this.labels=t.labels||[]},_=function(){function e(t){Object(u.a)(this,e),this.client=t.client}return Object(l.a)(e,[{key:"list",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var s,a,r,n,c,i,o,u,l,h;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s="/repos/".concat(t,"/pulls"),a=[];case 2:if(!s){e.next=11;break}return e.next=5,this.client.do({method:"GET",path:s});case 5:r=e.sent,n=Object(x.a)(r.data);try{for(n.s();!(c=n.n()).done;){i=c.value,o=[],u=Object(x.a)(i.labels);try{for(u.s();!(l=u.n()).done;)h=l.value,o.push(new S({id:h.id,name:h.name,color:h.color}))}catch(p){u.e(p)}finally{u.f()}a.push(new C({id:i.id,number:i.number,title:i.title,createdAt:i.created_at,url:i.html_url,user:new w({avatarURL:i.user.avatar_url}),labels:o}))}}catch(p){n.e(p)}finally{n.f()}s=((r.headers.link||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1],e.next=2;break;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),I=function e(t){Object(u.a)(this,e),this.tag=t.tag,this.commitsBehind=t.commitsBehind},A=new I({tag:"\u2014",commitsBehind:0}),M=function(){function e(t){Object(u.a)(this,e),this.client=t.client}return Object(l.a)(e,[{key:"latest",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var s,a,r,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.do({method:"GET",path:"/repos/".concat(t,"/releases/latest")});case 2:if(s=e.sent,a=A,200!==s.status){e.next=11;break}return r=s.data.tag_name,e.next=8,this.client.do({method:"GET",path:"/repos/".concat(t,"/compare/main...").concat(r)});case 8:s=e.sent,n=s.data.behind_by,a=new I({tag:r,commitsBehind:n});case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),T=function(){function e(t){Object(u.a)(this,e),this.props=t}return Object(l.a)(e,[{key:"set",value:function(e,t){e=this._key(e),this.props.storage.setItem(e,JSON.stringify(t))}},{key:"get",value:function(e){e=this._key(e);var t=this.props.storage.getItem(e);return t?JSON.parse(t):{}}},{key:"_key",value:function(e){return e=e.replace(/^(\/)/,""),"/cache/".concat(e)}}]),e}(),U=s(12),K=function(e){Object(p.a)(s,e);var t=Object(d.a)(s);function s(){return Object(u.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(a.jsx)("a",{className:this.props.className,"aria-label":this.props["aria-label"],href:this.props.href,target:"_blank",rel:"noopener noreferrer",children:this.props.children})}}]),s}(n.a.Component),D=(s(42),function(e){Object(p.a)(s,e);var t=Object(d.a)(s);function s(e){var a;Object(u.a)(this,s),(a=t.call(this,e)).cacheKey="/repos/".concat(e.repo.name,"/issues");var r=[],n=a.props.cache.get(a.cacheKey);if(n.issues)for(var c=0;c<n.issues.length;c++)r.push(new N(n.issues[c]));return a.state={issues:r},a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.load()}},{key:"componentDidUpdate",value:function(e){this.props.repo.openIssuesCount!==e.repo.openIssuesCount&&this.load()}},{key:"load",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.store.list(this.props.repo.name);case 2:t=e.sent,this.props.cache.set(this.cacheKey,{issues:t}),this.setState({issues:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e="none",t=this.state.issues.length;return t>0&&(e="low"),t>3&&(e="medium"),t>6&&(e="high"),Object(a.jsxs)(K,{className:"issue-count ".concat(e),href:"".concat(this.props.repo.url,"/issues"),"aria-label":"issue-count",children:[Object(a.jsx)(U.d,{size:16}),Object(a.jsx)("div",{className:"count",children:t})]})}}]),s}(n.a.Component)),B=(s(43),function(e){Object(p.a)(s,e);var t=Object(d.a)(s);function s(e){var a;Object(u.a)(this,s),(a=t.call(this,e)).cacheKey="/repos/".concat(e.repo.name,"/pull_requests");var r=[],n=a.props.cache.get(a.cacheKey);if(n.pull_requests)for(var c=0;c<n.pull_requests.length;c++)r.push(new C(n.pull_requests[c]));return a.state={pullRequests:r},a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.load()}},{key:"componentDidUpdate",value:function(e){this.props.repo.openIssuesCount!==e.repo.openIssuesCount&&this.load()}},{key:"load",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.store.list(this.props.repo.name);case 2:t=e.sent,this.props.cache.set(this.cacheKey,{pull_requests:t}),this.setState({pullRequests:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e="none",t=this.state.pullRequests.length;return t>0&&(e="low"),t>3&&(e="medium"),t>6&&(e="high"),Object(a.jsxs)(K,{href:"".concat(this.props.repo.url,"/pulls"),className:"pull-request-count ".concat(e),"aria-label":"pull-request-count",children:[Object(a.jsx)(U.c,{size:16}),Object(a.jsx)("div",{className:"count",children:t})]})}}]),s}(n.a.Component)),L=(s(44),function(e){Object(p.a)(s,e);var t=Object(d.a)(s);function s(e){var a;Object(u.a)(this,s),(a=t.call(this,e)).cacheKey="/repos/".concat(a.props.repo.name,"/releases/latest");var r=A,n=a.props.cache.get(a.cacheKey);return n.release&&(r=new I(n.release)),a.state={release:r},a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.load()}},{key:"load",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.releaseStore.latest(this.props.repo.name);case 2:t=e.sent,this.props.cache.set(this.cacheKey,{release:t}),this.setState({release:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e="commits-behind";return this.state.release.commitsBehind>0&&(e+=" behind"),Object(a.jsxs)("div",{className:"release-state","aria-label":"release-state",children:[Object(a.jsx)(K,{className:"tag","aria-label":"tag",href:"".concat(this.props.repo.url,"/releases"),children:this.state.release.tag}),Object(a.jsxs)(K,{className:e,"aria-label":"commits-behind",href:"".concat(this.props.repo.url,"/compare/").concat(this.state.release.tag,"...main"),children:[this.state.release.commitsBehind,Object(a.jsx)(U.b,{size:16})]})]})}}]),s}(n.a.Component)),P=(s(45),function(e){Object(p.a)(s,e);var t=Object(d.a)(s);function s(){return Object(u.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e=this.props.repo.name.split("/"),t=e[0],s=e[1];return Object(a.jsxs)("div",{className:"repo-item",children:[Object(a.jsx)("div",{className:"org",children:t}),Object(a.jsx)(K,{href:this.props.repo.url,className:"repo",children:s}),Object(a.jsxs)("div",{className:"issue-pull-request-count",children:[Object(a.jsx)(D,{repo:this.props.repo,store:this.props.issueStore,cache:this.props.cache}),Object(a.jsx)(B,{repo:this.props.repo,store:this.props.pullRequestStore,cache:this.props.cache})]}),Object(a.jsx)(L,{repo:this.props.repo,releaseStore:this.props.releaseStore,cache:this.props.cache})]})}}]),s}(n.a.Component)),z=function(){function e(t){Object(u.a)(this,e),this.props=t}return Object(l.a)(e,[{key:"list",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var s,a,r,n,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=[],a="/orgs/".concat(t,"/repos");case 2:if(!a){e.next=11;break}return e.next=5,this.props.client.do({method:"GET",path:a});case 5:r=e.sent,n=Object(x.a)(r.data);try{for(n.s();!(c=n.n()).done;)i=c.value,s.push(new g({id:i.id,name:i.full_name,url:i.html_url,openIssuesCount:i.open_issues_count}))}catch(o){n.e(o)}finally{n.f()}a=((r.headers.link||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1],e.next=2;break;case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),E=(s(24),s(46),function(e){Object(p.a)(s,e);var t=Object(d.a)(s);function s(e){var a;Object(u.a)(this,s),(a=t.call(this,e)).cacheKey="/repos";var r=[],n=a.props.cache.get(a.cacheKey);if(n.repos)for(var c=0;c<n.repos.length;c++)r.push(new g(n.repos[c]));return a.state={loading:0===r.length,repos:r},a.handleReload=a.handleReload.bind(Object(h.a)(a)),a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.load(),this.interval=this.props.timer.setInterval(this.load.bind(this),9e5)}},{key:"componentWillUnmount",value:function(){this.props.timer.clearInterval(this.interval)}},{key:"handleReload",value:function(e){this.load()}},{key:"load",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t,s,a,r,n,c,i,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.props.repoStore.list("paketo-buildpacks"),this.props.repoStore.list("paketo-community")]);case 2:t=e.sent,s=[],a=Object(x.a)(t);try{for(a.s();!(r=a.n()).done;){n=r.value,c=Object(x.a)(n);try{for(c.s();!(i=c.n()).done;)o=i.value,s.push(o)}catch(u){c.e(u)}finally{c.f()}}}catch(u){a.e(u)}finally{a.f()}s.sort((function(e,t){var s=e.name.toUpperCase(),a=t.name.toUpperCase();return s<a?-1:s>a?1:0})),this.props.cache.set(this.cacheKey,{repos:s}),this.setState({loading:!1,repos:s});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=Object(a.jsx)("div",{className:"loading",children:"..."});return this.state.loading||(t=this.state.repos.map((function(t){return Object(a.jsx)(P,{repo:t,issueStore:e.props.issueStore,pullRequestStore:e.props.pullRequestStore,releaseStore:e.props.releaseStore,cache:e.props.cache},t.id)}))),Object(a.jsxs)("div",{className:"repo-list",children:[Object(a.jsxs)("div",{className:"title",children:[Object(a.jsx)("h2",{children:"Overview"}),Object(a.jsx)("button",{onClick:this.handleReload,children:Object(a.jsx)(U.e,{size:16})})]}),Object(a.jsx)("div",{className:"list",children:t})]})}}]),s}(n.a.Component)),G=function e(t){Object(u.a)(this,e),this.red=parseInt(t.substring(0,2),16),this.green=parseInt(t.substring(2,4),16),this.blue=parseInt(t.substring(4,6),16)},J=function e(t){Object(u.a)(this,e);var s=new G(t),a=s.red/255,r=s.green/255,n=s.blue/255,c=Math.min(a,r,n),i=Math.max(a,r,n),o=i-c,l=0,h=0,p=0;l=0===o?0:i===a?(r-n)/o%6:i===r?(n-a)/o+2:(a-r)/o+4,(l=Math.round(60*l))<0&&(l+=360),p=(i+c)/2,h=0===o?0:o/(1-Math.abs(2*p-1)),p=+(100*p).toFixed(1),h=+(100*h).toFixed(1),this.hue=l,this.saturation=h,this.lightness=p},W=(s(47),function(e){Object(p.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(u.a)(this,s),(a=t.call(this,e)).rgb=new G(e.label.color),a.hsl=new J(e.label.color),a}return Object(l.a)(s,[{key:"render",value:function(){var e="rgba(".concat(this.rgb.red,", ").concat(this.rgb.green,", ").concat(this.rgb.blue,", 0.18)"),t="hsl(".concat(this.hsl.hue,", ").concat(this.hsl.saturation,"%, ").concat(this.hsl.lightness-30,"%)");return Object(a.jsx)("div",{"aria-label":"github-label",className:"github-label",style:{backgroundColor:e,color:t,borderColor:t},children:this.props.label.name})}}]),s}(n.a.Component)),F=(s(48),function(e){Object(p.a)(s,e);var t=Object(d.a)(s);function s(){return Object(u.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e=this.props.issue.createdAt.toRelative(),t=this.props.issue.createdAt.toLocaleString({month:"short",day:"numeric",year:"numeric"}),s="comment-count";0===this.props.issue.commentCount&&(s+=" none");var r=this.props.issue.labels.map((function(e){return Object(a.jsx)(W,{label:e},e.id)}));return Object(a.jsxs)("div",{className:"issue-item",children:[Object(a.jsx)(K,{className:"repo",href:this.props.repo.url,children:this.props.repo.name}),Object(a.jsxs)("div",{className:"content",children:[Object(a.jsxs)("div",{className:"identifier",children:[Object(a.jsx)("img",{className:"avatar",src:this.props.issue.user.avatarURL,alt:"user-avatar"}),Object(a.jsxs)("div",{className:"number",children:["#",this.props.issue.number]}),Object(a.jsx)(K,{className:"title",href:this.props.issue.url,children:this.props.issue.title}),r]}),Object(a.jsxs)("div",{className:s,"aria-label":"comment-count",children:[Object(a.jsx)("div",{className:"count",children:this.props.issue.commentCount}),Object(a.jsx)(U.a,{size:16})]})]}),Object(a.jsxs)("div",{className:"created-at",children:["opened ",e," (",t,")"]})]})}}]),s}(n.a.Component)),H=(s(49),function(e){Object(p.a)(s,e);var t=Object(d.a)(s);function s(e){var a;Object(u.a)(this,s);var r=[],n=(a=t.call(this,e)).props.cache.get("/repos");if(n.repos){var c,i=Object(x.a)(n.repos);try{for(i.s();!(c=i.n()).done;){var o=c.value,l=a.props.cache.get("/repos/".concat(o.name,"/issues"));if(l.issues){var h,p=Object(x.a)(l.issues);try{for(p.s();!(h=p.n()).done;){var d=h.value;r.push({repo:o,issue:new N(d)})}}catch(b){p.e(b)}finally{p.f()}}}}catch(b){i.e(b)}finally{i.f()}}return r.sort((function(e,t){var s=e.issue.createdAt.toMillis(),a=t.issue.createdAt.toMillis();return s<a?-1:s>a?1:0})),a.state={loading:0===r.length,issues:r},a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.load()}},{key:"load",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t,s,a,r,n,c,i,o,u,l,h,p,d,b,j,f,m,v;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.props.repoStore.list("paketo-buildpacks"),this.props.repoStore.list("paketo-community")]);case 2:t=e.sent,s=[],a=[],r=Object(x.a)(t);try{for(r.s();!(n=r.n()).done;){c=n.value,i=Object(x.a)(c);try{for(i.s();!(o=i.n()).done;)u=o.value,s.push(u),l=this.props.issueStore.list(u.name),a.push(l)}catch(O){i.e(O)}finally{i.f()}}}catch(O){r.e(O)}finally{r.f()}return e.next=9,Promise.all(a);case 9:for(h=e.sent,p=[],d=0;d<h.length;d++){b=h[d],j=s[d],this.props.cache.set("/repos/".concat(j.name,"/issues"),{issues:b}),f=Object(x.a)(b);try{for(f.s();!(m=f.n()).done;)v=m.value,p.push({repo:j,issue:v})}catch(O){f.e(O)}finally{f.f()}}s.sort((function(e,t){var s=e.name.toUpperCase(),a=t.name.toUpperCase();return s<a?-1:s>a?1:0})),this.props.cache.set("/repos",{repos:s}),p.sort((function(e,t){var s=e.issue.createdAt.toMillis(),a=t.issue.createdAt.toMillis();return s<a?-1:s>a?1:0})),this.setState({loading:!1,issues:p});case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=Object(a.jsx)("div",{className:"loading",children:"..."});return this.state.loading||(e=this.state.issues.map((function(e){return Object(a.jsx)(F,{issue:e.issue,repo:e.repo},e.issue.id)}))),Object(a.jsxs)("div",{className:"issue-list",children:[Object(a.jsxs)("div",{className:"title",children:[Object(a.jsx)("h2",{children:"Open Issues"}),Object(a.jsxs)("div",{className:"count",children:["(",this.state.issues.length,")"]})]}),Object(a.jsx)("div",{className:"list",children:e})]})}}]),s}(n.a.Component)),$=(s(50),function(e){Object(p.a)(s,e);var t=Object(d.a)(s);function s(){return Object(u.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e=this.props.pullRequest.createdAt.toRelative(),t=this.props.pullRequest.createdAt.toLocaleString({month:"short",day:"numeric",year:"numeric"}),s=this.props.pullRequest.labels.map((function(e){return Object(a.jsx)(W,{label:e},e.id)}));return Object(a.jsxs)("div",{className:"pull-request-item",children:[Object(a.jsx)(K,{className:"repo",href:this.props.repo.url,children:this.props.repo.name}),Object(a.jsx)("div",{className:"content",children:Object(a.jsxs)("div",{className:"identifier",children:[Object(a.jsx)("img",{className:"avatar",src:this.props.pullRequest.user.avatarURL,alt:"user-avatar"}),Object(a.jsxs)("div",{className:"number",children:["#",this.props.pullRequest.number]}),Object(a.jsx)(K,{className:"title",href:this.props.pullRequest.url,children:this.props.pullRequest.title}),s]})}),Object(a.jsxs)("div",{className:"created-at",children:["opened ",e," (",t,")"]})]})}}]),s}(n.a.Component)),Q=(s(51),function(e){Object(p.a)(s,e);var t=Object(d.a)(s);function s(e){var a;Object(u.a)(this,s);var r=[],n=(a=t.call(this,e)).props.cache.get("/repos");if(n.repos){var c,i=Object(x.a)(n.repos);try{for(i.s();!(c=i.n()).done;){var o=c.value,l=a.props.cache.get("/repos/".concat(o.name,"/pull_requests"));if(l.pull_requests){var h,p=Object(x.a)(l.pull_requests);try{for(p.s();!(h=p.n()).done;){var d=h.value;r.push({repo:o,pullRequest:new C(d)})}}catch(b){p.e(b)}finally{p.f()}}}}catch(b){i.e(b)}finally{i.f()}}return r.sort((function(e,t){var s=e.pullRequest.createdAt.toMillis(),a=t.pullRequest.createdAt.toMillis();return s<a?-1:s>a?1:0})),a.state={loading:0===r.length,pullRequests:r},a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.load()}},{key:"load",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t,s,a,r,n,c,i,o,u,l,h,p,d,b,j,f,m,v;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.props.repoStore.list("paketo-buildpacks"),this.props.repoStore.list("paketo-community")]);case 2:t=e.sent,s=[],a=[],r=Object(x.a)(t);try{for(r.s();!(n=r.n()).done;){c=n.value,i=Object(x.a)(c);try{for(i.s();!(o=i.n()).done;)u=o.value,s.push(u),l=this.props.pullRequestStore.list(u.name),a.push(l)}catch(O){i.e(O)}finally{i.f()}}}catch(O){r.e(O)}finally{r.f()}return e.next=9,Promise.all(a);case 9:for(h=e.sent,p=[],d=0;d<h.length;d++){b=h[d],j=s[d],this.props.cache.set("/repos/".concat(j.name,"/pull_requests"),{pull_requests:b}),f=Object(x.a)(b);try{for(f.s();!(m=f.n()).done;)v=m.value,p.push({repo:j,pullRequest:v})}catch(O){f.e(O)}finally{f.f()}}s.sort((function(e,t){var s=e.name.toUpperCase(),a=t.name.toUpperCase();return s<a?-1:s>a?1:0})),this.props.cache.set("/repos",{repos:s}),p.sort((function(e,t){var s=e.pullRequest.createdAt.toMillis(),a=t.pullRequest.createdAt.toMillis();return s<a?-1:s>a?1:0})),this.setState({loading:!1,pullRequests:p});case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=Object(a.jsx)("div",{className:"loading",children:"..."});return this.state.loading||(e=this.state.pullRequests.map((function(e){return Object(a.jsx)($,{pullRequest:e.pullRequest,repo:e.repo},e.pullRequest.id)}))),Object(a.jsxs)("div",{className:"pull-request-list",children:[Object(a.jsxs)("div",{className:"title",children:[Object(a.jsx)("h2",{children:" Open Pull Requests"}),Object(a.jsxs)("div",{className:"count",children:["(",this.state.pullRequests.length,")"]})]}),Object(a.jsx)("div",{className:"list",children:e})]})}}]),s}(n.a.Component)),V=function(e){Object(p.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(u.a)(this,s),(a=t.call(this,e)).state={authenticated:!!a.props.storage.getItem("token")},a.assignToken=a.assignToken.bind(Object(h.a)(a)),a}return Object(l.a)(s,[{key:"assignToken",value:function(e){this.props.storage.setItem("token",e),this.setState({authenticated:!!this.props.storage.getItem("token")})}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"app",children:[Object(a.jsx)(f,{}),Object(a.jsx)("section",{className:"body",children:Object(a.jsxs)(b.d,{children:[Object(a.jsx)(b.b,{path:"".concat("","/login"),render:function(t){var s=t.history,r=t.location;return Object(a.jsx)(m,{assignToken:e.assignToken,history:s,location:r})}}),Object(a.jsx)(j,{path:"".concat("","/issues"),authenticated:this.state.authenticated,children:Object(a.jsx)(H,{cache:this.props.cache,repoStore:this.props.repoStore,issueStore:this.props.issueStore})}),Object(a.jsx)(j,{path:"".concat("","/pull-requests"),authenticated:this.state.authenticated,children:Object(a.jsx)(Q,{cache:this.props.cache,repoStore:this.props.repoStore,pullRequestStore:this.props.pullRequestStore})}),Object(a.jsx)(j,{path:"".concat("","/"),authenticated:this.state.authenticated,children:Object(a.jsx)(E,{repoStore:this.props.repoStore,issueStore:this.props.issueStore,pullRequestStore:this.props.pullRequestStore,releaseStore:this.props.releaseStore,timer:this.props.timer,cache:this.props.cache})})]})})]})}}]),s}(n.a.Component),X=window.localStorage,Y=window,Z=new T({storage:X}),ee=new q({storage:X}),te=new z({client:ee}),se=new R({client:ee}),ae=new _({client:ee}),re=new M({client:ee});i.a.render(Object(a.jsx)(o.a,{children:Object(a.jsx)(V,{repoStore:te,issueStore:se,pullRequestStore:ae,releaseStore:re,timer:Y,cache:Z,storage:X})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[52,1,2]]]);
//# sourceMappingURL=main.114f2b72.chunk.js.map